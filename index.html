<!-- index.html -->
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Nora R.</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="preload" as="image" href="moon.png" />
    <link rel="preload" as="image" href="sun.png" />
    <link rel="preload" as="image" href="avatar.JPG" fetchpriority="high" />
  </head>

  <body>
    <main class="wrap">
      <header class="header">
        <button
          id="theme-toggle"
          class="theme-toggle"
          type="button"
          aria-label="Switch to dark mode"
          title="Switch to dark mode"
        >
          <img id="theme-icon" src="moon.png" alt="Moon icon" width="20" height="20" decoding="async" />
        </button>
      </header>

      <section class="hero">
        <img
          src="avatar.JPG"
          alt="Photo of Nora"
          class="site-avatar"
          width="192"
          height="192"
          decoding="async"
          fetchpriority="high"
        />
        <h1 class="name">Nora Ransibrahmanakul</h1>
        <p class="subtitle">Hello!</p>
      </section>

      <section class="block">
        <details open>
          <summary>About</summary>
          <p>
            I’m studying Applied Math (Mechanical Engineering concentration) and Anthropology at Yale.
          </p>
          <p>
            I'm interested in many things, including: engineering, business, philosophy, and how people and machines interact.
          </p>
        </details>
      </section>

      <section class="block">
        <details open>
          <summary>Currently</summary>
          <p>
            • <a href="https://pahlavan.yale.edu/" target="_blank" rel="noopener">Transport Phenomena</a> Research
          </p>
          <p>
            • <a href="https://bulldogsracing.com/" target="_blank" rel="noopener">Bulldogs Racing</a> President
          </p>
          <p>• Google Global Youth Advisor with Canvas8</p>
        </details>
      </section>

      <section class="block">
        <details>
          <summary>Previously</summary>
          <p>
            At University: <a href="https://hillhousefellows.com/about" target="_blank" rel="noopener">Hillhouse Fellowship</a>
            • Yale Daily News • Yale Entrepreneurial Society
          </p>
          <p>
            Outside of School: • Lakeshore Capital
            • <a href="https://www.non-trivial.org/" target="_blank" rel="noopener">Nontrivial Fellowship</a>
            • U.S. Geological Survey
          </p>
        </details>
      </section>

      <section class="block">
        <details>
          <summary>Things I Like</summary>
          <p>Being outside! hiking, skiing, travel</p>
          <p>
            Learning and collecting!
            <a href="https://www.goodreads.com/user/show/75850603-nora" target="_blank" rel="noopener">books</a>,
            <a href="https://www.postcrossing.com/user/birds-10/gallery" target="_blank" rel="noopener">postcards</a>
          </p>
        </details>
      </section>

      <section class="block">
        <details>
          <summary>Contact</summary>
          <p>
            <a href="mailto:noraransi10@gmail.com">noraransi10@gmail.com</a>
            · <a href="https://www.linkedin.com/in/noraransi/">LinkedIn</a>
          </p>
        </details>
      </section>
    </main>

    <script>
      (function () {
        const storageKey = "theme"; // "light" | "dark"
        const root = document.documentElement;

        function currentTheme() {
          return root.getAttribute("data-theme") === "dark" ? "dark" : "light";
        }

        function updateIcon(theme) {
          const img = document.getElementById("theme-icon");
          if (!img) return;
          if (theme === "dark") {
          img.src = "sun.png";
          img.alt = "Sun icon";
          } else {
          img.src = "moon.png";
          img.alt = "Moon icon";
          }
        }

        function setTheme(theme) {
          theme = theme === "dark" ? "dark" : "light";

          // Avoid flashes: disable transitions for a tick
          const style = document.createElement("style");
          style.textContent = "* { transition: none !important; }";
          document.head.appendChild(style);

          if (theme === "dark") {
            root.setAttribute("data-theme", "dark");
          } else {
            root.removeAttribute("data-theme");
          }

          try { localStorage.setItem(storageKey, theme); } catch {}

          const btn = document.getElementById("theme-toggle");
          if (btn) {
            btn.setAttribute("aria-label", theme === "dark" ? "Switch to light mode" : "Switch to dark mode");
            btn.title = theme === "dark" ? "Light mode" : "Dark mode";
          }
          updateIcon(theme);

          // Force reflow then remove the override
          void document.body.offsetHeight;
          requestAnimationFrame(() => {
            if (style.parentNode) style.parentNode.removeChild(style);
          });
        }

        // Initial theme (persisted or system)
        const stored = (() => {
          try { return localStorage.getItem(storageKey); } catch { return null; }
        })();
        const prefersDark = window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches;
        const initial = stored || (prefersDark ? "dark" : "light");
        setTheme(initial);

        // Click to toggle
        function ready(fn) {
          if (document.readyState === "loading") {
            document.addEventListener("DOMContentLoaded", fn, { once: true });
          } else {
            fn();
          }
        }

        ready(() => {
          const btn = document.getElementById("theme-toggle");
          if (!btn) return;
          btn.addEventListener("click", () => {
            const next = currentTheme() === "dark" ? "light" : "dark";
            setTheme(next);
          });
        });

        // Follow system if user hasn't chosen
        if (!stored && window.matchMedia) {
          const mq = window.matchMedia("(prefers-color-scheme: dark)");
          const onChange = e => setTheme(e.matches ? "dark" : "light");
          if (mq.addEventListener) mq.addEventListener("change", onChange);
          else if (mq.addListener) mq.addListener(onChange);
        }
      })();
    </script>
  </body>
</html>
