<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Nora R.</title>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <main class="wrap">
      <header class="header">
        <img
          src="avatar.JPG"
          alt="Photo of Nora"
          class="site-avatar"
          width="128"
          height="96"
          decoding="async"
          fetchpriority="high"
        />
        <h1 class="name">Nora Ransibrahmanakul</h1>
        <p class="subtitle">Hello!</p>

        <button id="theme-toggle" class="theme-toggle" type="button" aria-label="Toggle theme" title="Toggle theme">
          <img id="theme-icon" src="sun.png" alt="Sun icon" width="20" height="20" decoding="async" />
        </button>
      </header>

      <section class="block">
        <details open>
          <summary>About</summary>
          <p>
            I’m studying Applied Math (Mechanical Engineering concentration) and Anthropology at Yale.
          </p>
          <p>
            I'm interested in many things, including: engineering, business, philosophy, and how people and machines interact.
          </p>
        </details>
      </section>

      <section class="block">
        <details open>
          <summary>Currently</summary>
          <p>
            • <a href="https://pahlavan.yale.edu/" target="_blank" rel="noopener">Transport Phenomena</a> Research
          </p>
          <p>
            • <a href="https://bulldogsracing.com/" target="_blank" rel="noopener">Bulldogs Racing</a> President
          </p>
          <p>
            • Google Global Youth Advisor with Canvas8
          </p>
        </details>
      </section>

      <section class="block">
        <details>
          <summary>Previously</summary>
          <p>
            At University: <a href="https://hillhousefellows.com/about" target="_blank" rel="noopener">Hillhouse Fellowship</a>
            • Yale Daily News • Yale Entrepreneurial Society
          </p>
          <p>
            Outside of School: • Lakeshore Capital
            • <a href="https://www.non-trivial.org/" target="_blank" rel="noopener">Nontrivial Fellowship</a>
            • U.S. Geological Survey
          </p>
        </details>
      </section>

      <section class="block">
        <details>
          <summary>Things I Like</summary>
          <p>
            Being outside! hiking, skiing, travel
          </p>
          <p>
            Learning and collecting! <a href="https://www.goodreads.com/user/show/75850603-nora" target="_blank" rel="noopener">books</a>,
            <a href="https://www.postcrossing.com/user/birds-10/gallery" target="_blank" rel="noopener">postcards</a>
          </p>
        </details>
      </section>

      <section class="block">
        <details>
          <summary>Contact</summary>
          <p>
            <a href="mailto:noraransi10@gmail.com">noraransi10@gmail.com</a>
            · <a href="https://www.linkedin.com/in/noraransi/">LinkedIn</a>
          </p>
        </details>
      </section>
    </main>

    <script>
      (function () {
        const storageKey = "theme"; // "light" | "dark"
        const root = document.documentElement;

        function currentTheme() {
          return root.getAttribute("data-theme") === "dark" ? "dark" : "light";
        }

        function updateToggleIcon(theme) {
          const img = document.getElementById("theme-icon");
          if (!img) return;
          if (theme === "dark") {
            img.src = "moon.png";
            img.alt = "Moon icon";
          } else {
            img.src = "sun.png";
            img.alt = "Sun icon";
          }
        }

        function setTheme(theme) {
          // Normalize any unexpected input to "light" | "dark"
          theme = theme === "dark" ? "dark" : "light";

          if (theme === "dark") {
            root.setAttribute("data-theme", "dark");
          } else {
            root.removeAttribute("data-theme");
          }

          try {
            localStorage.setItem(storageKey, theme);
          } catch (err) {
            // Ignore storage errors (e.g., private mode)
          }

          const btn = document.getElementById("theme-toggle");
          if (btn) {
            btn.setAttribute("aria-label", theme === "dark" ? "Switch to light mode" : "Switch to dark mode");
            btn.title = theme === "dark" ? "Light mode" : "Dark mode";
          }

          updateToggleIcon(theme);
        }

        // Determine initial theme
        const stored = (() => {
          try {
            return localStorage.getItem(storageKey);
          } catch {
            return null;
          }
        })();

        const prefersDark =
          window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches;

        const initial = stored || (prefersDark ? "dark" : "light");
        setTheme(initial);

        // Wire up button
        function ready(fn) {
          if (document.readyState === "loading") {
            document.addEventListener("DOMContentLoaded", fn, { once: true });
          } else {
            fn();
          }
        }

        ready(() => {
          const btn = document.getElementById("theme-toggle");
          if (!btn) return;
          btn.addEventListener("click", () => {
            const next = currentTheme() === "dark" ? "light" : "dark";
            setTheme(next);
          });
        });

        // If user hasn't chosen, follow system changes live
        if (!stored && window.matchMedia) {
          const mq = window.matchMedia("(prefers-color-scheme: dark)");
          if (mq.addEventListener) {
            mq.addEventListener("change", (e) => setTheme(e.matches ? "dark" : "light"));
          } else if (mq.addListener) {
            // Safari/older
            mq.addListener((e) => setTheme(e.matches ? "dark" : "light"));
          }
        }
      })();
    </script>

    <!-- If you also have script.js with theme code, either remove it or ensure it doesn't conflict. -->
    <!-- <script src="script.js"></script> -->
  </body>
</html>
